################################################################################
#
#   settings-motor-tr-001.json - Test motor Travel per Revolution settings
#
#  Run these tests with no setup file
#
{
  "defaults":{
    "fail":"hard",
    "delay":0.100
  }
}
#
{
  "before_all":{
    "label":"Reset default settings",
    "before":["{defa:t}"]
  }
}
#
{
  "after_all":{
    "label":"Reset default settings",
    "after":["{defa:t}"]
  }
}
# SETUP
{
    "t":{"label":"Set configs for settings tests",
         "send":["{js:1}", "{jv:5}", "{tv:1}", "{qv:0}", "{sv:2}", "{si:200}"]},
    "r":{"status":0}
}
#
{
    "t":{"label":"Set to MM",
         "send":["G21"]},
    "r":{"status":0}
}
#
# TR - Travel per Revolution tests
#
{
    "t":{"label":"Write 3tr - reasonable value",
         "send":["{3tr:5.08}"]},
        "r":{"status":0, "3tr":5.08}
}
#
{
    "t":{"label":"Read 3tr in MM - flat",
         "send":["{3tr:null}"]},
         "r":{"status":0, "3tr":5.08}
}
#
{
    "t":{"label":"Read 3tr in MM - nested",
         "send":["{3:{tr:null}}"]},
         "r":{"status":0, "3":{"tr":5.08}}
}
#
{
    "t":{"label":"Write 3tr - ridiculous value - should still pass",
         "send":["{3tr:499.99}"]},
        "r":{"status":0, "3tr":499.99}
}
#
{
    "t":{"label":"Write 3tr - zero value - should still pass",
         "send":["{3tr:0}"]},
        "r":{"status":0, "3tr":0}
}
#
{
    "t":{"label":"Write 3tr - negative value - should still pass",
         "send":["{3tr:-1.8}"]},
        "r":{"status":0, "3tr":-1.8}
}
# SKIP
{
    "t":{"label":"Set to Inches",
         "send":["G20"]},
    "r":{"status":0}
}
#
{
    "t":{"label":"Read 3tr in Inches",
         "send":["G20", "{3tr:null}"]},
        "r":{"status":0}
}

# EXCEPTIONS
{
    "t":{"label":"write 3tr with boolean - exception",
         "send":["{3tr:t}"]},
        "r":{"status":117}
}
